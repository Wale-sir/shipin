<!DOCTYPE html>
{% load static %}
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>
    {% block css %}
        <script>
	function show()  //显示隐藏层和弹出层
	{
	   var hideobj=document.getElementById("hidebg");
	   hidebg.style.display="block";  //显示隐藏层
	   //hidebg.style.height=document.body.clientHeight+"px";  //设置隐藏层的高度为当前页面高度
	   document.getElementById("hidebox").style.display="block";  //显示弹出层
	}
	function show_1()  //显示隐藏层和弹出层
	{
	   var hideobj=document.getElementById("hidebg");
	   hidebg.style.display="block";  //显示隐藏层
	   //hidebg.style.height=document.body.clientHeight+"px";  //设置隐藏层的高度为当前页面高度
	   document.getElementById("hidebox_1").style.display="block";  //显示弹出层
	}
	function hide()  //去除隐藏层和弹出层
	{
	   document.getElementById("hidebg").style.display="none";
	   document.getElementById("hidebox").style.display="none";
	}
	function hide_1()  //去除隐藏层和弹出层
	{
	   document.getElementById("hidebg").style.display="none";
	   document.getElementById("hidebox_1").style.display="none";
	}
</script>
        <style>
        .head{
            background-color: #FF79A3;
            height: 500px;
            position:relative;

        }
        .body{
            background-color: aqua;
            z-Index:-1;
        }
        .foot{
            background-color: antiquewhite;
            z-Index:-1;

        }
        .box{
        width:50%; margin-top:100%; margin:auto; padding:28px;
        height:350px; border:1px #111 solid;
        display:none;            /* 默认对话框隐藏 */
    }
    .box.show{display:block;position:relative;}
    .box .box_x{ font-size:18px; text-align:right; display:block;position:relative;}
    .box input{width:80%; font-size:18px; margin-top:18px;position:relative;background-color: #fff}
    #hidebg { position:absolute;left:0px;top:0px;
      background-color:grey;
      width:100%;  /*宽度设置为100%，这样才能使隐藏背景层覆盖原页面*/
      height: 100%;
      filter:alpha(opacity=60);  /*设置透明度为60%*/
      opacity:0.6;  /*非IE浏览器下设置透明度为60%*/
      display:none;
      z-Index:1;}
   #hidebox { text-align: right;position:absolute;
       width:400px;height:300px;top:100px;left:30%;
       border-radius: 5px;background-color:#66ccff;display:none;z-Index:9;padding: 10px;}
   #hidebox_1 { text-align: right;position:absolute;
       width:400px;height:300px;top:100px;left:30%;
       border-radius: 5px;background-color:#66ccff;display:none;z-Index:3;padding: 10px;}
   #content { text-align: center;cursor:pointer;z-Index:1;}
        </style>
    <script src="/static/js/jquery.min.js" type="text/javascript"></script>
        <script src="js/jquery.min.js"></script>
    <script src="/static/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script><script src="js/jquery.min.js"></script>
    {% endblock %}
</head>
<body>
<div class="head">
<h1>
    head

</h1>
<div>
    {% if user %}
            {% if  type != 'home'%}
                <a href="{% url 'index' %}">个人主页</a>
                {% else %}
                <a href="{% url 'home' %}">首页</a>
            {% endif %}
            <a href="{% url 'logout' %}">退出</a>
    {% else%}

{#        <input type="button" onClick="msg_box(2)" value="点击注册">#}
{#        <input type="button" onClick="msgbox(1)" value="点击登陆">#}
        <div id="hidebg"></div>
        <div id="hidebox">

            {% csrf_token %}
                <h1>用户登陆</h1>
                    <label for="id_username">用户名:</label>
                    <input type="text" name="username" id="id_login_username"><br>
                    <label for="id_password">密&nbsp;&nbsp;&nbsp;&nbsp;码:</label>
                    <input type="password" name="password" id="id_login_password"><br><br><br>
                <button id="js_push_login"  type="submit">提交</button>
                 {{ error }}
            <span onClick="hide();" style="cursor:pointer;">关闭</span>
        </div>
	<div id="content" onClick="show();">点击登陆</div>

        <div id="hidebox_1">
                    {% csrf_token %}
                <h1>用户注册</h1>
                <label for="id_username">用户名:</label>
                <input type="text" id="id_username" name="username" placeholder="用户名">
                <br>
                <label for="id_password">密&nbsp;&nbsp;&nbsp;&nbsp;码:</label>
                <input type="password" id="id_password" name="password" placeholder="密码">
                <br>
                <label for="id_password">重复密码:</label>
                <input type="password" id="id_check_password" name="check_password" placeholder="重复密码">
                <button id="js_push_re" type="submit">提交</button>
            {{ error }}
            <span onClick="hide_1();" style="cursor:pointer;">关闭</span>
        </div>
	<div id="content" onClick="show_1();">点击注册</div>
        <div class="body" style="height:auto;">
    <h1>
        body
    </h1>
    <div class="videos-label">
        {% block custom_bread %}
        {% endblock %}
        {% block content %}
        {% endblock %}
    </div>
</div>
{#        注册#}
{#        <div id='input_box' class="box" style="background:#66ccff; color:#000">#}
{#            <a class='box_x' onclick="msg_box(0); return false;">关闭</a> {#点击事件#}
{#            <form action="{% url 're' %}" method="POST">#}
{#            {% csrf_token %}#}
{#                <h1>用户注册</h1>#}
{#                <label for="id_username">用户名:</label>#}
{#                <input type="text" id="id_username" name="username" placeholder="用户名">#}
{#                <br>#}
{#                <label for="id_password">密&nbsp;&nbsp;&nbsp;&nbsp;码:</label>#}
{#                <input type="password" id="id_password" name="password" placeholder="密码">#}
{#                <br>#}
{#                <label for="id_password">重复密码:</label>#}
{#                <input type="password" id="id_check_password" name="check_password" placeholder="重复密码">#}
{#                <button id="js_push_re" type="submit">提交</button>#}
{#            {{ error }}#}
{#            </form>#}
{#        </div>#}

{#        登录#}
{#        <div id='inputbox' class="box" style="background:#66ccff; color:#000">#}
{#            <a class='box_x' onclick="msgbox(0); return false;">关闭</a>  {#点击事件#}
{#                <h1>用户登录</h1>#}
{#             <form action="{% url 'login' %}" method="POST">#}
{#                 {% csrf_token %}#}
{#                    <label for="id_username">用户名:</label>#}
{#                    <input type="text" name="username" id="id_login_username"><br>#}
{#                    <label for="id_password">密&nbsp;&nbsp;&nbsp;&nbsp;码:</label>#}
{#                    <input type="password" name="password" id="id_login_password"><br><br><br>#}
{#                <button id="js_push_login"  type="submit">提交</button>#}
{#                 {{ error }}#}
{#             </form>#}
{#        </div>#}
    {% endif %}


    {%  if username %}
            user:{{ username }}
    {%  endif %}
    </div>
</div>



</body>

<footer>
<div class="foot">
        <h1>
       foot
    </h1>
</div>
{% block custom_jss %}
{% endblock %}
    <script type="text/javascript">
        function msgbox(n){
            document.getElementById('inputbox').style.display=n?'block':'none';     /* 点击按钮打开/关闭 对话框 */
        }

        function msg_box(n){
            document.getElementById('input_box').style.display=n?'block':'none';     /* 点击按钮打开/关闭 对话框 */
        }

        {# 登录验证 #}
        $(document).ready(function() {
            $('#js_push_login').on('click',
                function () {
                var username = $('#id_username').val();
                var password = $('#id_password').val();
                $.ajax({
                    cache:false,
                    type:'POST',
                    url:'{% url 'login' %}',
                    data:{
                        'username': username,
                        'password': password},
                    async:true,
                    beforeSend:function (xhr,setting) {
                        xhr.setRequestHeader('X-CSRFToken','{{ csrf_token }}');
                    },
                    success:function (data) {
                    if (data.status == 'fail'){
                            alert(data.msg)
                    }else if(data.status == 'success'){
                            alert(data.msg);
                        window.location.reload();
                    }}
                        })
                    }
                )
            }
        )

        {# 注册验证登录 #}
        $(document).ready(function() {
            $('#js_push_re').on('click',
                function () {
                var username = $('#id_username').val();
                var password = $('#id_password').val();
                var check_password = $('#id_check_password').val();
                $.ajax({
                    cache:false,
                    type:'POST',
                    url:'{% url 're' %}',
                    data:{
                        'username': username,
                        'password': password,
                        'check_password': check_password},
                    async:true,
                    beforeSend:function (xhr,setting) {
                        xhr.setRequestHeader('X-CSRFToken','{{ csrf_token }}');
                    },
                    success:function (data) {
                    if (data.status == 'fail'){
                            alert(data.msg)
                    }else if(data.status == 'success'){
                            alert(data.msg);
                        window.location.reload();
                    }}
                        })
                    }
                )
            }
        )

     </script>
</footer>
<script src="/static/js/selectUi.js" type="text/javascript"></script>
<script src="/static/js/deco-common.js" type="text/javascript"></script>
<script src="/static/js/plugins/unslider.js" type="text/javascript"></script>
<script src="/static/js/plugins/laydate/laydate.js" type="text/javascript"></script>
<script src="/static/js/plugins/layer/layer.js" type="text/javascript"></script>
<script src="/static/js/plugins/queryCity/js/public.js" type="text/javascript"></script>
<script src="/static/js/plugins/jquery.scrollLoading.js" type="text/javascript"></script>
</html>